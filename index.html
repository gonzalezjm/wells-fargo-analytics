<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Wells Fargo Analytics Competition by gonzalezjm</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>Wells Fargo Analytics Competition</h1>
        <p>Fall 2015 Data Science</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/gonzalezjm/wells-fargo-analytics" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/gonzalezjm/wells-fargo-analytics/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/gonzalezjm/wells-fargo-analytics/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <p>This wiki page is meant to show how, why and the results of our analysis of the Wells Fargo dataset from the Wells Fargo MindSumo challenge. To start, here is a process flow diagram.</p>

<h1>
<a id="process-flow-diagram" class="anchor" href="#process-flow-diagram" aria-hidden="true"><span class="octicon octicon-link"></span></a>Process Flow Diagram</h1>

<p><img src="http://i.imgur.com/UBQ4LBQ.png" alt="Process-Diagram-img"></p>

<h1>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h1>

<p>In order to attain a workable dataset, we import dataset.txt into a data frame, then clean the FullText column of non-ASCII characters, punctuation, and other “trouble” terms we might come across, such as words with no meaningful value in the context of the analysis. We then add a column to our data frame called “BankID”, which allows us to keep track of which bank each comment references.
The code to complete this is:</p>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># loads the text file with the data and puts it into a data frame</span>
<span class="pl-v">df</span> <span class="pl-k">=</span> read.table(<span class="pl-s"><span class="pl-pds">'</span>dataset.txt<span class="pl-pds">'</span></span>,<span class="pl-v">sep</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>|<span class="pl-pds">"</span></span>,<span class="pl-v">header</span><span class="pl-k">=</span><span class="pl-c1">T</span>)

<span class="pl-c"># FullText: the column in the dataframe that contains the tweets/statuses</span>
<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-v">FullText</span> <span class="pl-k">=</span> as.character(<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">FullText</span>)

<span class="pl-c"># Grab just the texts, to load them into the Corpus</span>
<span class="pl-v">df.texts</span> <span class="pl-k">=</span> as.data.frame(<span class="pl-smi">df</span>[,ncol(<span class="pl-smi">df</span>)])
colnames(<span class="pl-smi">df.texts</span>) <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>FullText<span class="pl-pds">'</span></span>

<span class="pl-c"># Remove non-ascii characters</span>
<span class="pl-v">df.texts.clean</span> <span class="pl-k">=</span> as.data.frame(iconv(<span class="pl-smi">df.texts</span><span class="pl-k">$</span><span class="pl-smi">FullText</span>, <span class="pl-s"><span class="pl-pds">"</span>latin1<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>ASCII<span class="pl-pds">"</span></span>, <span class="pl-v">sub</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>))
colnames(<span class="pl-smi">df.texts.clean</span>) <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>FullText<span class="pl-pds">'</span></span>

<span class="pl-c"># stores the new cleaned FullText into the data frame in place of the original FullText column</span>
<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-v">FullText</span> <span class="pl-k">=</span> <span class="pl-smi">df.texts.clean</span><span class="pl-k">$</span><span class="pl-smi">FullText</span>

<span class="pl-c"># If you want to test on just 10000 records using df.10000 created below (can be any # of records)</span>
<span class="pl-v">idx.10000</span> <span class="pl-k">=</span> sample(<span class="pl-c1">1</span><span class="pl-k">:</span>nrow(<span class="pl-smi">df</span>),<span class="pl-c1">10000</span>)
<span class="pl-v">df.10000</span> <span class="pl-k">=</span> <span class="pl-smi">df</span>[<span class="pl-smi">idx.10000</span>,]

<span class="pl-v">df.entire</span> <span class="pl-k">=</span> <span class="pl-smi">df</span>
<span class="pl-v">df</span> <span class="pl-k">=</span> <span class="pl-smi">df.10000</span>

<span class="pl-c"># Load using the tm library</span>
library(<span class="pl-smi">tm</span>) 
<span class="pl-smi">docs</span> <span class="pl-k">&lt;-</span> Corpus(DataframeSource(as.data.frame(<span class="pl-smi">df</span>[,<span class="pl-c1">6</span>])))  

<span class="pl-smi">docs</span> <span class="pl-k">&lt;-</span> tm_map(<span class="pl-smi">docs</span>, <span class="pl-smi">PlainTextDocument</span>)  

<span class="pl-c"># remove punctuation</span>
<span class="pl-smi">docs</span> <span class="pl-k">&lt;-</span> tm_map(<span class="pl-smi">docs</span>, <span class="pl-smi">removePunctuation</span>) 

<span class="pl-c"># Strip extra whitespace</span>
<span class="pl-smi">docs</span> <span class="pl-k">&lt;-</span> tm_map(<span class="pl-smi">docs</span>, <span class="pl-smi">stripWhitespace</span>)

<span class="pl-c">#Grab indexes of comments for different banks</span>
<span class="pl-v">bankA.idx</span> <span class="pl-k">=</span> which(sapply(<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">FullText</span>,<span class="pl-k">function</span>(<span class="pl-smi">x</span>) grepl(<span class="pl-s"><span class="pl-pds">"</span>BankA<span class="pl-pds">"</span></span>,<span class="pl-smi">x</span>)))
<span class="pl-v">bankB.idx</span> <span class="pl-k">=</span> which(sapply(<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">FullText</span>,<span class="pl-k">function</span>(<span class="pl-smi">x</span>) grepl(<span class="pl-s"><span class="pl-pds">"</span>BankB<span class="pl-pds">"</span></span>,<span class="pl-smi">x</span>)))
<span class="pl-v">bankC.idx</span> <span class="pl-k">=</span> which(sapply(<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">FullText</span>,<span class="pl-k">function</span>(<span class="pl-smi">x</span>) grepl(<span class="pl-s"><span class="pl-pds">"</span>BankC<span class="pl-pds">"</span></span>,<span class="pl-smi">x</span>)))
<span class="pl-v">bankD.idx</span> <span class="pl-k">=</span> which(sapply(<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">FullText</span>,<span class="pl-k">function</span>(<span class="pl-smi">x</span>) grepl(<span class="pl-s"><span class="pl-pds">"</span>BankD<span class="pl-pds">"</span></span>,<span class="pl-smi">x</span>)))

<span class="pl-c">#give each bank a name</span>
<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-v">BankID</span> <span class="pl-k">=</span> <span class="pl-c1">NaN</span><span class="pl-k">*</span><span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">MediaType</span> <span class="pl-c"># Only do this because I want it to be the right size</span>
<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">BankID</span>[<span class="pl-smi">bankA.idx</span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>BankA<span class="pl-pds">"</span></span>
<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">BankID</span>[<span class="pl-smi">bankB.idx</span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>BankB<span class="pl-pds">"</span></span>
<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">BankID</span>[<span class="pl-smi">bankC.idx</span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>BankC<span class="pl-pds">"</span></span>
<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">BankID</span>[<span class="pl-smi">bankD.idx</span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>BankD<span class="pl-pds">"</span></span>

<span class="pl-c">#put data into docs for each bank</span>
<span class="pl-v">bankA.docs</span> <span class="pl-k">=</span> <span class="pl-smi">docs</span>[<span class="pl-smi">bankA.idx</span>]
<span class="pl-v">bankB.docs</span> <span class="pl-k">=</span> <span class="pl-smi">docs</span>[<span class="pl-smi">bankB.idx</span>]
<span class="pl-v">bankC.docs</span> <span class="pl-k">=</span> <span class="pl-smi">docs</span>[<span class="pl-smi">bankC.idx</span>]
<span class="pl-v">bankD.docs</span> <span class="pl-k">=</span> <span class="pl-smi">docs</span>[<span class="pl-smi">bankD.idx</span>] 
</pre></div>

<p>Once we have the data properly loaded and sorted, we can start creating different plots/visuals. In our case, we ran word frequencies, word associations, and word cluster dendrograms. As we looked at different plots, I started removing terms that I thought were not useful from the data. Some terms were very stubborn and could not be removed from the data for some reason. This was a recurring problem throughout the project. Below is the exact list of words I decided to remove from the data.</p>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">docs</span> <span class="pl-k">&lt;-</span> tm_map(<span class="pl-smi">docs</span>, <span class="pl-smi">removeWords</span>,c(<span class="pl-s"><span class="pl-pds">"</span>their<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>from<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>had<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>who<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>was<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>have<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>you<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>but<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>they<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>its<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>just<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>got<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>will<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>with<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>has<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>Name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>nameresp<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>dirmsg<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>and<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>for<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>twithndl<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>let<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>this<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>are<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>what<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>would<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>here<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>nameresp<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>that<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>the<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>rettwit<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>https<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>http<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>twithndlbanka<span class="pl-pds">"</span></span>)) </pre></div>

<h1>
<a id="frequent-terms-word-clouds-and-cluster-dendrograms" class="anchor" href="#frequent-terms-word-clouds-and-cluster-dendrograms" aria-hidden="true"><span class="octicon octicon-link"></span></a>Frequent Terms, Word Clouds and Cluster Dendrograms</h1>

<p>Once we had a set of words that we were content with, we found the frequent terms, created a word cloud and created a cluster dendrogram for the data as a whole. The code snippets below show how we were able to achieve that.</p>

<h2>
<a id="finding-frequent-terms" class="anchor" href="#finding-frequent-terms" aria-hidden="true"><span class="octicon octicon-link"></span></a>Finding frequent terms:</h2>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">tdm</span> <span class="pl-k">&lt;-</span> TermDocumentMatrix(<span class="pl-smi">docs</span>)
<span class="pl-smi">dtm</span> <span class="pl-k">&lt;-</span> DocumentTermMatrix(<span class="pl-smi">docs</span>)

findFreqTerms(<span class="pl-smi">dtm</span>,<span class="pl-c1">2000</span>)

<span class="pl-smi">freq</span> <span class="pl-k">&lt;-</span> colSums(as.matrix(<span class="pl-smi">dtm</span>))  
<span class="pl-smi">ord</span> <span class="pl-k">&lt;-</span> order(<span class="pl-smi">freq</span>)   
<span class="pl-smi">freq</span>[head(<span class="pl-smi">ord</span>)]  
<span class="pl-smi">freq</span>[tail(<span class="pl-smi">ord</span>)]
<span class="pl-smi">freq</span>[<span class="pl-smi">ord</span>[(length(<span class="pl-smi">ord</span>)<span class="pl-k">-</span><span class="pl-c1">100</span>)<span class="pl-k">:</span>length(<span class="pl-smi">ord</span>)]]

<span class="pl-v">dtm</span> <span class="pl-k">=</span> removeSparseTerms(<span class="pl-smi">dtm</span>, <span class="pl-c1">0.98</span>)</pre></div>

<h2>
<a id="creating-a-word-cloud" class="anchor" href="#creating-a-word-cloud" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating a word cloud:</h2>

<p>A word cloud shows the most frequent words in the data. In our case, we chose to show the top 100 words.</p>

<div class="highlight highlight-source-r"><pre>library(<span class="pl-smi">wordcloud</span>)   
set.seed(<span class="pl-c1">142</span>)   
<span class="pl-smi">dark2</span> <span class="pl-k">&lt;-</span> brewer.pal(<span class="pl-c1">6</span>, <span class="pl-s"><span class="pl-pds">"</span>Dark2<span class="pl-pds">"</span></span>)  
wordcloud(names(<span class="pl-smi">freq</span>), <span class="pl-smi">freq</span>, <span class="pl-v">max.words</span><span class="pl-k">=</span><span class="pl-c1">100</span>, <span class="pl-v">rot.per</span><span class="pl-k">=</span><span class="pl-c1">0.2</span>, <span class="pl-v">colors</span><span class="pl-k">=</span><span class="pl-smi">dark2</span>) <span class="pl-c"># 100 most frequent words</span></pre></div>

<h3>
<a id="word-cloud-output" class="anchor" href="#word-cloud-output" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word Cloud Output</h3>

<p><img src="http://i.imgur.com/29NPvyZ.png" alt="Word-Cloud-img"></p>

<p>The word cloud above shows the top 100 most frequent words in the data set. An example of a hypothesis that could be formed from this word cloud is that bankA and bankB are the most prevalent banks because they are mentioned the most.</p>

<h2>
<a id="creating-a-cluster-dendrogram" class="anchor" href="#creating-a-cluster-dendrogram" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating a cluster dendrogram:</h2>

<p>A cluster dendrogram uses euclidian distance to show relationships and hierarchies among the words. These can be very valuable if the data set is cleaned up in the right way.</p>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">dtmss</span> <span class="pl-k">&lt;-</span> removeSparseTerms(<span class="pl-smi">dtm</span>, <span class="pl-c1">0.96</span>) 
<span class="pl-c">#inspect(dtmss)</span>

library(<span class="pl-smi">cluster</span>)   
<span class="pl-smi">d</span> <span class="pl-k">&lt;-</span> dist(t(<span class="pl-smi">dtmss</span>), <span class="pl-v">method</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>euclidian<span class="pl-pds">"</span></span>)   
<span class="pl-smi">fit</span> <span class="pl-k">&lt;-</span> hclust(<span class="pl-v">d</span><span class="pl-k">=</span><span class="pl-smi">d</span>, <span class="pl-v">method</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>ward.D<span class="pl-pds">"</span></span>)   

plot(<span class="pl-smi">fit</span>, <span class="pl-v">hang</span><span class="pl-k">=</span><span class="pl-k">-</span><span class="pl-c1">1</span>)  

<span class="pl-smi">groups</span> <span class="pl-k">&lt;-</span> cutree(<span class="pl-smi">fit</span>, <span class="pl-v">k</span><span class="pl-k">=</span><span class="pl-c1">5</span>)   <span class="pl-c"># "k=" defines the number of clusters you are using   </span>
rect.hclust(<span class="pl-smi">fit</span>, <span class="pl-v">k</span><span class="pl-k">=</span><span class="pl-c1">5</span>, <span class="pl-v">border</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>red<span class="pl-pds">"</span></span>) <span class="pl-c"># draw dendogram with red borders around the 5 clusters  </span></pre></div>

<h3>
<a id="cluster-dendrogram-output" class="anchor" href="#cluster-dendrogram-output" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cluster Dendrogram Output</h3>

<p><img src="http://i.imgur.com/U3k8IkR.png" alt="Cluster-Dendrogram-img"></p>

<p>The cluster dendrogram above doesn't show much, but if it was full scale, you would be able to see the hierarchy of related words. When we ran this with the full data set, it was not legible. But, with the right display form, it could be very useful.</p>

<h2>
<a id="word-associations" class="anchor" href="#word-associations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word Associations</h2>

<p>The code below shows how to find the words associated with a list of terms. For example, the first line of the code would find words that are most associated with banka, bankb, bankc and bankd.</p>

<div class="highlight highlight-source-r"><pre>findAssocs(<span class="pl-smi">dtmss</span>, c(<span class="pl-s"><span class="pl-pds">"</span>banka<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>bankb<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>bankc<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>bankd<span class="pl-pds">"</span></span>), <span class="pl-v">corlimit</span><span class="pl-k">=</span><span class="pl-c1">0.01</span>)

findAssocs(<span class="pl-smi">dtmss</span>, c(<span class="pl-s"><span class="pl-pds">"</span>credit<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>internet<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>business<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>account<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>financial<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>over<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>money<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>phone<span class="pl-pds">"</span></span>), <span class="pl-v">corlimit</span><span class="pl-k">=</span><span class="pl-c1">0.01</span>)

findAssocs(<span class="pl-smi">dtmss</span>, c(<span class="pl-s"><span class="pl-pds">"</span>rating<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>thank<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>card<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>time<span class="pl-pds">"</span></span>), <span class="pl-v">corlimit</span><span class="pl-k">=</span><span class="pl-c1">0.01</span>)</pre></div>

<h3>
<a id="word-association-output" class="anchor" href="#word-association-output" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word Association Output</h3>

<p><img src="http://i.imgur.com/tzm6zgt.png" alt="Word-Association-img"></p>

<p>The image above shows the output for the first line of code (a word association for banka, bankb, bankc and bankd). From these associations, you can determine what some of the recurring tweet/status topics may be. For example, "card", "account", and "credit" could be recurring topics for some of the banks. Some of the associations that come up are not that useful, but that is up to the analyst to decide what is useful or not. For the sake of the project, it was more important to me to show why and how I did things, rather than to get a perfect result.</p>

<h1>
<a id="analyzing-each-bank" class="anchor" href="#analyzing-each-bank" aria-hidden="true"><span class="octicon octicon-link"></span></a>Analyzing Each Bank</h1>

<p>The next step for us was analyzing each bank one by one. To do this, we completed the same steps that we did for the data set as a whole. But, we also added a bar graph for the most frequent terms.</p>

<h2>
<a id="clean-up-data-for-one-bank" class="anchor" href="#clean-up-data-for-one-bank" aria-hidden="true"><span class="octicon octicon-link"></span></a>Clean up data for One Bank</h2>

<div class="highlight highlight-source-r"><pre><span class="pl-c">#remove words from doc and create a term document matrix and document term matrix</span>
<span class="pl-smi">bankA.docs</span> <span class="pl-k">&lt;-</span> tm_map(<span class="pl-smi">bankA.docs</span>, <span class="pl-smi">removeWords</span>,c(<span class="pl-s"><span class="pl-pds">"</span>twit_hndl_banka<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>twit_hndl<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>their<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>from<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>had<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>who<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>was<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>have<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>you<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>but<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>they<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>its<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>just<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>got<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>one<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>will<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>with<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>has<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>Name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>nameresp<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>dirmsg<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>and<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>for<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>twithndl<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>let<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>it.<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>name_resp<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>them<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>then<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>tt/<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>ly/<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>bit.<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>our<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>these<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>way<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>this<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>are<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>what<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>would<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>here<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>nameresp<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>that<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>the<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>rettwit<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>https<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>http<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>twithndlbanka<span class="pl-pds">"</span></span>)) 

<span class="pl-smi">tdmA</span> <span class="pl-k">&lt;-</span> TermDocumentMatrix(<span class="pl-smi">bankA.docs</span>)
<span class="pl-smi">dtmA</span> <span class="pl-k">&lt;-</span> DocumentTermMatrix(<span class="pl-smi">bankA.docs</span>)</pre></div>

<h2>
<a id="frequent-terms-for-one-bank" class="anchor" href="#frequent-terms-for-one-bank" aria-hidden="true"><span class="octicon octicon-link"></span></a>Frequent Terms for One Bank</h2>

<div class="highlight highlight-source-r"><pre><span class="pl-c">#find the frequent terms in the dataset for the respective bank</span>
findFreqTerms(<span class="pl-smi">dtmA</span>,<span class="pl-c1">2000</span>)

<span class="pl-smi">freqA</span> <span class="pl-k">&lt;-</span> colSums(as.matrix(<span class="pl-smi">dtmA</span>))  
<span class="pl-smi">ordA</span> <span class="pl-k">&lt;-</span> order(<span class="pl-smi">freqA</span>)   
<span class="pl-smi">freq</span>[head(<span class="pl-smi">ordA</span>)]  
<span class="pl-smi">freq</span>[tail(<span class="pl-smi">ordA</span>)]
<span class="pl-smi">freq</span>[<span class="pl-smi">ordA</span>[(length(<span class="pl-smi">ordA</span>)<span class="pl-k">-</span><span class="pl-c1">100</span>)<span class="pl-k">:</span>length(<span class="pl-smi">ordA</span>)]]

<span class="pl-c">#remove least used terms</span>
<span class="pl-v">dtmA</span> <span class="pl-k">=</span> removeSparseTerms(<span class="pl-smi">dtmA</span>, <span class="pl-c1">0.99</span>)</pre></div>

<h2>
<a id="word-cloud-for-one-bank" class="anchor" href="#word-cloud-for-one-bank" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word Cloud for One Bank</h2>

<div class="highlight highlight-source-r"><pre><span class="pl-c">#create wordcloud</span>
library(<span class="pl-smi">wordcloud</span>)   
set.seed(<span class="pl-c1">142</span>)   
<span class="pl-smi">dark2</span> <span class="pl-k">&lt;-</span> brewer.pal(<span class="pl-c1">6</span>, <span class="pl-s"><span class="pl-pds">"</span>Dark2<span class="pl-pds">"</span></span>)  
wordcloud(names(<span class="pl-smi">freqA</span>), <span class="pl-smi">freqA</span>, <span class="pl-v">max.words</span><span class="pl-k">=</span><span class="pl-c1">100</span>, <span class="pl-v">rot.per</span><span class="pl-k">=</span><span class="pl-c1">0.2</span>, <span class="pl-v">colors</span><span class="pl-k">=</span><span class="pl-smi">dark2</span>) <span class="pl-c"># 100 most frequent words</span>

<span class="pl-smi">dtmssA</span> <span class="pl-k">&lt;-</span> removeSparseTerms(<span class="pl-smi">dtmA</span>, <span class="pl-c1">0.99</span>) 
<span class="pl-c">#inspect(dtmssA)</span></pre></div>

<h3>
<a id="word-cloud-for-banka" class="anchor" href="#word-cloud-for-banka" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word Cloud for BankA</h3>

<p><img src="http://i.imgur.com/I1BwraB.png" alt="Word-CloudA-img"></p>

<p>Above is the Word Cloud for Bank A.</p>

<h2>
<a id="word-associations-for-one-bank" class="anchor" href="#word-associations-for-one-bank" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word Associations for One Bank</h2>

<div class="highlight highlight-source-r"><pre><span class="pl-c">#find word associations</span>
findAssocs(<span class="pl-smi">dtmssA</span>, c(<span class="pl-s"><span class="pl-pds">"</span>banka<span class="pl-pds">"</span></span>), <span class="pl-v">corlimit</span><span class="pl-k">=</span><span class="pl-c1">0.02</span>)
findAssocs(<span class="pl-smi">dtmA</span>, c(<span class="pl-s"><span class="pl-pds">"</span>banka<span class="pl-pds">"</span></span>), <span class="pl-v">corlimit</span><span class="pl-k">=</span><span class="pl-c1">0.02</span>)
findAssocs(<span class="pl-smi">dtmA</span>, c(<span class="pl-s"><span class="pl-pds">"</span>banka<span class="pl-pds">"</span></span>), <span class="pl-v">corlimit</span><span class="pl-k">=</span><span class="pl-c1">0.02</span>)</pre></div>

<h3>
<a id="word-associations-for-bank-a" class="anchor" href="#word-associations-for-bank-a" aria-hidden="true"><span class="octicon octicon-link"></span></a>Word Associations for Bank A</h3>

<p><img src="http://i.imgur.com/5BLy3oM.png" alt="Word-AssociationsA-img"></p>

<p>Above are the word associations for Bank A. Like before, you can make hypothesis' about what topics are discussed frequently about Bank A.</p>

<h2>
<a id="frequent-terms-bar-graph-for-bank-a" class="anchor" href="#frequent-terms-bar-graph-for-bank-a" aria-hidden="true"><span class="octicon octicon-link"></span></a>Frequent Terms Bar Graph for Bank A</h2>

<div class="highlight highlight-source-r"><pre><span class="pl-c">#create bar graph for the most frequently used terms</span>
<span class="pl-smi">freq.termsA</span> <span class="pl-k">&lt;-</span> findFreqTerms(<span class="pl-smi">tdmA</span>, <span class="pl-v">lowfreq</span> <span class="pl-k">=</span> <span class="pl-c1">50</span>)
<span class="pl-smi">termA.freq</span> <span class="pl-k">&lt;-</span> rowSums(as.matrix(<span class="pl-smi">tdmA</span>))

<span class="pl-smi">termA.freq</span> <span class="pl-k">&lt;-</span> subset(<span class="pl-smi">termA.freq</span>, <span class="pl-smi">termA.freq</span> <span class="pl-k">&gt;</span><span class="pl-k">=</span> <span class="pl-c1">50</span>)

<span class="pl-smi">df.A</span> <span class="pl-k">&lt;-</span> <span class="pl-k">data.frame</span>(<span class="pl-v">term</span> <span class="pl-k">=</span> names(<span class="pl-smi">termA.freq</span>), <span class="pl-v">freq</span> <span class="pl-k">=</span> <span class="pl-smi">termA.freq</span>)

library(<span class="pl-smi">ggplot2</span>)
ggplot(<span class="pl-smi">df.A</span>, aes(<span class="pl-v">x</span> <span class="pl-k">=</span> <span class="pl-smi">term</span>, <span class="pl-v">y</span> <span class="pl-k">=</span> <span class="pl-smi">freq</span>)) <span class="pl-k">+</span> geom_bar(<span class="pl-v">stat</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>identity<span class="pl-pds">"</span></span>) <span class="pl-k">+</span> xlab(<span class="pl-s"><span class="pl-pds">"</span>Terms<span class="pl-pds">"</span></span>) <span class="pl-k">+</span> ylab(<span class="pl-s"><span class="pl-pds">"</span>Count<span class="pl-pds">"</span></span>) <span class="pl-k">+</span> coord_flip()</pre></div>

<h3>
<a id="bar-graph-for-frequent-terms-for-bank-a" class="anchor" href="#bar-graph-for-frequent-terms-for-bank-a" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bar Graph for Frequent Terms for Bank A</h3>

<p><img src="http://i.imgur.com/ra9gyfE.png" alt="Bar-GraphA-img"></p>

<p>The bar graph above shows the terms that are used 50 times or more in the data set for Bank A.</p>

<h1>
<a id="sentiment-analysis" class="anchor" href="#sentiment-analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sentiment Analysis</h1>

<p>Next, we did a "sentiment" analysis, which helps to judge if a comment was positive or negative. Each comment is scored on its “sentiment” by matching the terms in the comment to two libraries of “positive” and “negative” terms. Each score is found by subtracting the number of negative terms in the comment from the number of positive terms in the comment. We then use “very positive” (score &gt; 1) and “very negative” (score &lt; -1) scores to calculate the global score using the formula GlobalScore = 100 * verypos / (verypos + veryneg). </p>

<h2>
<a id="set-up-for-sentiment-analysis" class="anchor" href="#set-up-for-sentiment-analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Set-up for Sentiment Analysis</h2>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">pos</span> <span class="pl-k">&lt;-</span> scan(<span class="pl-s"><span class="pl-pds">'</span>positive-words.txt<span class="pl-pds">'</span></span>,<span class="pl-v">what</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>character<span class="pl-pds">'</span></span>,<span class="pl-v">comment.char</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>;<span class="pl-pds">'</span></span>)
<span class="pl-smi">neg</span> <span class="pl-k">&lt;-</span> scan(<span class="pl-s"><span class="pl-pds">'</span>negative-words.txt<span class="pl-pds">'</span></span>,<span class="pl-v">what</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>character<span class="pl-pds">'</span></span>,<span class="pl-v">comment.char</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>;<span class="pl-pds">'</span></span>)

<span class="pl-v">score.sentiment</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">sentences</span>, <span class="pl-smi">pos.words</span>, <span class="pl-smi">neg.words</span>, <span class="pl-v">.progress</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>)
{
  require(<span class="pl-smi">plyr</span>)
  require(<span class="pl-smi">stringr</span>)

  <span class="pl-c"># we got a vector of sentences. plyr will handle a list</span>
  <span class="pl-c"># or a vector as an "l" for us</span>
  <span class="pl-c"># we want a simple array ("a") of scores back, so we use </span>
  <span class="pl-c"># "l" + "a" + "ply" = "laply":</span>
  <span class="pl-v">scores</span> <span class="pl-k">=</span> laply(<span class="pl-smi">sentences</span>, <span class="pl-k">function</span>(<span class="pl-smi">sentence</span>, <span class="pl-smi">pos.words</span>, <span class="pl-smi">neg.words</span>) {

    <span class="pl-c"># clean up sentences with R's regex-driven global substitute, gsub():</span>
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> gsub(<span class="pl-s"><span class="pl-pds">'</span>[[:punct:]]<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-smi">sentence</span>)
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> gsub(<span class="pl-s"><span class="pl-pds">'</span>[[:cntrl:]]<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-smi">sentence</span>)
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> gsub(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\\</span>d+<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-smi">sentence</span>)
    <span class="pl-c"># and convert to lower case:</span>
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> tolower(<span class="pl-smi">sentence</span>)

    <span class="pl-c"># split into words. str_split is in the stringr package</span>
    <span class="pl-v">word.list</span> <span class="pl-k">=</span> str_split(<span class="pl-smi">sentence</span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\\</span>s+<span class="pl-pds">'</span></span>)
    <span class="pl-c"># sometimes a list() is one level of hierarchy too much</span>
    <span class="pl-v">words</span> <span class="pl-k">=</span> unlist(<span class="pl-smi">word.list</span>)

    <span class="pl-c"># compare our words to the dictionaries of positive &amp; negative terms</span>
    <span class="pl-v">pos.matches</span> <span class="pl-k">=</span> match(<span class="pl-smi">words</span>, <span class="pl-smi">pos.words</span>)
    <span class="pl-v">neg.matches</span> <span class="pl-k">=</span> match(<span class="pl-smi">words</span>, <span class="pl-smi">neg.words</span>)

    <span class="pl-c"># match() returns the position of the matched term or NA</span>
    <span class="pl-c"># we just want a TRUE/FALSE:</span>
    <span class="pl-v">pos.matches</span> <span class="pl-k">=</span> <span class="pl-k">!</span>is.na(<span class="pl-smi">pos.matches</span>)
    <span class="pl-v">neg.matches</span> <span class="pl-k">=</span> <span class="pl-k">!</span>is.na(<span class="pl-smi">neg.matches</span>)

    <span class="pl-c"># and conveniently enough, TRUE/FALSE will be treated as 1/0 by sum():</span>
    <span class="pl-v">score</span> <span class="pl-k">=</span> sum(<span class="pl-smi">pos.matches</span>) <span class="pl-k">-</span> sum(<span class="pl-smi">neg.matches</span>)

    <span class="pl-k">return</span>(<span class="pl-smi">score</span>)
  }, <span class="pl-smi">pos.words</span>, <span class="pl-smi">neg.words</span>, <span class="pl-v">.progress</span><span class="pl-k">=</span>.<span class="pl-smi">progress</span> )

  <span class="pl-v">scores.df</span> <span class="pl-k">=</span> <span class="pl-k">data.frame</span>(<span class="pl-v">score</span><span class="pl-k">=</span><span class="pl-smi">scores</span>, <span class="pl-v">text</span><span class="pl-k">=</span><span class="pl-smi">sentences</span>)
  <span class="pl-k">return</span>(<span class="pl-smi">scores.df</span>)
}

<span class="pl-v">df.sentiment</span> <span class="pl-k">=</span> <span class="pl-smi">df</span>[<span class="pl-smi">bankA.idx</span>,]

<span class="pl-c">#scores = score.sentiment(df.sentiment$FullText, pos, neg, .progress='text')</span>
<span class="pl-v">scores</span> <span class="pl-k">=</span> score.sentiment(<span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">FullText</span>, <span class="pl-smi">pos</span>, <span class="pl-smi">neg</span>, <span class="pl-v">.progress</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>text<span class="pl-pds">'</span></span>)
<span class="pl-smi">scores</span><span class="pl-k">$</span><span class="pl-v">very.pos</span> <span class="pl-k">=</span> as.numeric(<span class="pl-smi">scores</span><span class="pl-k">$</span><span class="pl-smi">score</span> <span class="pl-k">&gt;</span><span class="pl-k">=</span> <span class="pl-c1">2</span>)
<span class="pl-smi">scores</span><span class="pl-k">$</span><span class="pl-v">very.neg</span> <span class="pl-k">=</span> as.numeric(<span class="pl-smi">scores</span><span class="pl-k">$</span><span class="pl-smi">score</span> <span class="pl-k">&lt;</span><span class="pl-k">=</span> <span class="pl-k">-</span><span class="pl-c1">2</span>)

<span class="pl-c"># how many very positives and very negatives</span>
<span class="pl-v">numpos</span> <span class="pl-k">=</span> sum(<span class="pl-smi">scores</span><span class="pl-k">$</span><span class="pl-smi">very.pos</span>)
<span class="pl-v">numneg</span> <span class="pl-k">=</span> sum(<span class="pl-smi">scores</span><span class="pl-k">$</span><span class="pl-smi">very.neg</span>)

<span class="pl-c"># global score</span>
<span class="pl-v">global_score</span> <span class="pl-k">=</span> round( <span class="pl-c1">100</span> <span class="pl-k">*</span> <span class="pl-smi">numpos</span> <span class="pl-k">/</span> (<span class="pl-smi">numpos</span> <span class="pl-k">+</span> <span class="pl-smi">numneg</span>) )

<span class="pl-smi">scores</span><span class="pl-k">$</span><span class="pl-v">mediatype</span> <span class="pl-k">=</span> <span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">MediaType</span>
<span class="pl-smi">scores</span><span class="pl-k">$</span><span class="pl-v">bank</span> <span class="pl-k">=</span> <span class="pl-smi">df</span><span class="pl-k">$</span><span class="pl-smi">BankID</span>

<span class="pl-c"># colors</span>
<span class="pl-v">cols</span> <span class="pl-k">=</span> c(<span class="pl-s"><span class="pl-pds">"</span>#7CAE00<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>#00BFC4<span class="pl-pds">"</span></span>)
names(<span class="pl-smi">cols</span>) <span class="pl-k">=</span> c(<span class="pl-s"><span class="pl-pds">"</span>twitter<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>facebook<span class="pl-pds">"</span></span>)</pre></div>

<p>After everything is set up, we can create plots. In this case, I chose to work with boxplots.</p>

<h2>
<a id="create-a-boxplot-for-the-sentiments-by-media-type" class="anchor" href="#create-a-boxplot-for-the-sentiments-by-media-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a Boxplot for the Sentiments by Media Type</h2>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># boxplot</span>
library(<span class="pl-smi">ggplot2</span>)
ggplot(<span class="pl-smi">scores</span>, aes(<span class="pl-v">x</span><span class="pl-k">=</span><span class="pl-smi">mediatype</span>, <span class="pl-v">y</span><span class="pl-k">=</span><span class="pl-smi">score</span>, <span class="pl-v">group</span><span class="pl-k">=</span><span class="pl-smi">mediatype</span>)) <span class="pl-k">+</span>
  geom_boxplot(aes(<span class="pl-v">fill</span><span class="pl-k">=</span><span class="pl-smi">mediatype</span>)) <span class="pl-k">+</span>
  scale_fill_manual(<span class="pl-v">values</span><span class="pl-k">=</span><span class="pl-smi">cols</span>) <span class="pl-k">+</span>
  geom_jitter(<span class="pl-v">colour</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>gray40<span class="pl-pds">"</span></span>,<span class="pl-v">position</span><span class="pl-k">=</span>position_jitter(<span class="pl-v">width</span><span class="pl-k">=</span><span class="pl-c1">0.2</span>), <span class="pl-v">alpha</span><span class="pl-k">=</span><span class="pl-c1">0.3</span>) <span class="pl-k">+</span>
  labs(<span class="pl-v">title</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Media Type's Sentiment Scores<span class="pl-pds">"</span></span>) <span class="pl-k">+</span> 
  xlab(<span class="pl-s"><span class="pl-pds">'</span>Media Type<span class="pl-pds">'</span></span>) <span class="pl-k">+</span> ylab(<span class="pl-s"><span class="pl-pds">'</span>Sentiment Score<span class="pl-pds">'</span></span>)</pre></div>

<h3>
<a id="boxplot-for-sentiments-by-media-type" class="anchor" href="#boxplot-for-sentiments-by-media-type" aria-hidden="true"><span class="octicon octicon-link"></span></a>Boxplot for Sentiments by Media Type</h3>

<p><img src="http://i.imgur.com/AldYUAl.png" alt="Boxplot-Media-img"></p>

<p>The boxplot above shows that the sentiments for Twitter are more neutral than the sentiments shown on Facebook. If you look at the spreads of the box plots, the box plot for Facebook has a lot more variability in the sentiment scores. This could be because more people express their true feelings about a business in Facebook statuses because they want other people to know. While this is just a theory, from personal experience, Twitter and Facebook feeds are completely different. Facebook will have a lot of people talking about businesses they have recently visited and the troubles they've had, while Twitter seems to be more of a free form media type. I can't prove this to be true, so I can't come to conclusions based on that.</p>

<h2>
<a id="create-boxplot-for-sentiments-by-bank" class="anchor" href="#create-boxplot-for-sentiments-by-bank" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create Boxplot for Sentiments by Bank</h2>

<div class="highlight highlight-source-r"><pre><span class="pl-c"># COLORS</span>
<span class="pl-v">colsN</span> <span class="pl-k">=</span> c(<span class="pl-s"><span class="pl-pds">"</span>#7CAE00<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>#00BFC4<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>#FFB90F<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>#C39797<span class="pl-pds">"</span></span>)
names(<span class="pl-smi">colsN</span>) <span class="pl-k">=</span> c(<span class="pl-s"><span class="pl-pds">"</span>Bank A<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Bank B<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Bank C<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Bank D<span class="pl-pds">"</span></span>)
<span class="pl-c"># BOXPLOT</span>
library(<span class="pl-smi">ggplot2</span>)
ggplot(<span class="pl-smi">scores</span>, aes(<span class="pl-v">x</span> <span class="pl-k">=</span> <span class="pl-smi">bank</span>, <span class="pl-v">y</span> <span class="pl-k">=</span> <span class="pl-smi">score</span>, <span class="pl-v">group</span> <span class="pl-k">=</span> <span class="pl-smi">bank</span>)) <span class="pl-k">+</span>
  geom_boxplot(aes(<span class="pl-v">fill</span> <span class="pl-k">=</span> <span class="pl-smi">bank</span>)) <span class="pl-k">+</span>
  scale_fill_manual(<span class="pl-v">values</span> <span class="pl-k">=</span> <span class="pl-smi">colsN</span>) <span class="pl-k">+</span>
  geom_jitter(<span class="pl-v">colour</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>gray40<span class="pl-pds">"</span></span>,<span class="pl-v">position</span><span class="pl-k">=</span>position_jitter(<span class="pl-v">width</span><span class="pl-k">=</span><span class="pl-c1">0.2</span>), <span class="pl-v">alpha</span><span class="pl-k">=</span><span class="pl-c1">0.3</span>) <span class="pl-k">+</span>
  labs(<span class="pl-v">title</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Sentiment Scores by Bank<span class="pl-pds">"</span></span>) <span class="pl-k">+</span> 
  xlab(<span class="pl-s"><span class="pl-pds">'</span>Bank<span class="pl-pds">'</span></span>) <span class="pl-k">+</span> ylab(<span class="pl-s"><span class="pl-pds">'</span>Sentiment Score<span class="pl-pds">'</span></span>)</pre></div>

<h3>
<a id="boxplot-for-sentiments-by-bank" class="anchor" href="#boxplot-for-sentiments-by-bank" aria-hidden="true"><span class="octicon octicon-link"></span></a>Boxplot for Sentiments by Bank</h3>

<p><img src="http://i.imgur.com/n0t9xMT.png" alt="Boxplot-Bank-img"></p>

<p>As can be seen above, it looks like BankC has the lowest sentiment score because of where the mean is located on the box plot. If you take a look at this box plot and then take a look at frequent terms, you can come up with theories of why. For example, a bank could have a lower sentiment score because of customer service. These are the types of theories that can be useful to companies, so that they know what to fix within their business.</p>

<h1>
<a id="conclusion" class="anchor" href="#conclusion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conclusion</h1>

<p>In conclusion, the tools that I used above can be used to come to conclusions about businesses, not just banks. Knowing what topics are frequently talked about, and the sentiments around them, can be useful to make changes within a business. The sentiment analysis can also be useful to compare businesses. For example, I came to realize that Bank C was the bank with the most negative sentiments. There is something they need to work on in order to make their customers happier. Using the word frequencies and associations will help with that, by helping pinpoint the exact cause. For example, a frequent term of customer service with a negative sentiment analysis could mean that the customer service needs to be improved. Maybe the business needs to train their customer service representatives, or maybe even weed out employees. The dataset and the code are available for download from my repository.</p>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/gonzalezjm">gonzalezjm</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
